<app-modal [isOpen]="isOpen" [title]="isEditMode ? 'Edit Feeding' : 'Add Feeding'" (close)="onClose()">
  <form (ngSubmit)="onSubmit()">
    <div class="form-group">
      <label for="pet">Pet *</label>
      <select id="pet" [(ngModel)]="feeding.petId" name="pet" required>
        <option *ngFor="let pet of pets" [value]="pet.id">{{ pet.name }}</option>
      </select>
    </div>

    <div class="datetime-group">
      <div class="form-group">
        <label for="feedingDate">Date *</label>
        <input
          type="date"
          id="feedingDate"
          [(ngModel)]="feedingDate"
          name="feedingDate"
          required
        />
      </div>

      <div class="form-group">
        <label for="feedingTime">Time *</label>
        <input
          type="time"
          id="feedingTime"
          [(ngModel)]="feedingTime"
          name="feedingTime"
          required
        />
      </div>
    </div>

    <div class="form-group">
      <label for="grams">Grams *</label>
      <input
        #gramsInput
        type="number"
        id="grams"
        [(ngModel)]="feeding.grams"
        name="grams"
        placeholder="e.g., 200"
        min="1"
        required
      />
    </div>

    <div class="form-group">
      <label for="notes">Notes</label>
      <textarea
        id="notes"
        [(ngModel)]="feeding.notes"
        name="notes"
        rows="3"
        placeholder="Any additional notes..."
      ></textarea>
    </div>

    <div *ngIf="errorMessage" class="error-message">
      {{ errorMessage }}
    </div>

    <div class="modal-actions">
      <button type="button" class="btn btn-secondary" (click)="onClose()">
        Cancel
      </button>
      <button *ngIf="isEditMode" type="button" class="btn btn-danger" (click)="onDelete()">
        Delete
      </button>
      <button type="submit" class="btn btn-primary" [disabled]="isLoading || !gramsInput.value">
        {{ isLoading ? 'Saving...' : 'Save' }}
      </button>
    </div>
  </form>
</app-modal>
